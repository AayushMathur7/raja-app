<<<<<<< HEAD
"Code for the following raja-app-main/data/corpus_summary.csv: \n file_name,n_tokens\nraja-app-main/.pre-commit-config.yaml,196\nraja-app-main/LICENSE.md,1945\nraja-app-main/Pipfile,152\nraja-app-main/Pipfile.lock,44491\nraja-app-main/README.md,283\nraja-app-main/convex/_generated/api.d.ts,182\nraja-app-main/convex/_generated/api.js,138\nraja-app-main/convex/_generated/dataModel.d.ts,477\nraja-app-main/convex/_generated/server.d.ts,1401\nraja-app-main/convex/_generated/server.js,881\nraja-app-main/convex/repo.js,120\nraja-app-main/convex/tickets.js,143\nraja-app-main/data/content.txt,277\nraja-app-main/data/corpus_summary.csv,766\nraja-app-main/data/file_path.json,116\nraja-app-main/jsconfig.json,52\nraja-app-main/middleware.js,65\nraja-app-main/next.config.js,57\nraja-app-main/package-lock.json,155829\nraja-app-main/package.json,391\nraja-app-main/postcss.config.js,59\nraja-app-main/prettier.config.js,41\nraja-app-main/server/app.py,522\nraja-app-main/server/embeddings.py,1325\nraja-app-main/server/prompts/get_relevant_files.txt,70\nraja-app-main/server/prompts/pr_body_template.txt,112\nraja-app-main/server/prompts/pr_branch_template.txt,66\nraja-app-main/server/prompts/pr_title_template.txt,110\nraja-app-main/server/prompts/tickets/bug_template.txt,374\nraja-app-main/server/raja.py,1454\nraja-app-main/src/api/dashboard.jsx,311\nraja-app-main/src/components/AuthLayout.jsx,233\nraja-app-main/src/components/Button.jsx,477\nraja-app-main/src/components/CallToAction.jsx,341\nraja-app-main/src/components/Container.jsx,77\nraja-app-main/src/components/Faqs.jsx,1067\nraja-app-main/src/components/Fields.jsx,321\nraja-app-main/src/components/Footer.jsx,1280\nraja-app-main/src/components/Header.jsx,1101\nraja-app-main/src/components/Hero.jsx,1592\nraja-app-main/src/components/Logo.jsx,1634\nraja-app-main/src/components/NavLink.jsx,91\nraja-app-main/src/components/Pricing.jsx,2217\nraja-app-main/src/components/PrimaryFeatures.jsx,1628\nraja-app-main/src/components/SecondaryFeatures.jsx,2551\nraja-app-main/src/components/Testimonials.jsx,2148\nraja-app-main/src/components/dashboard/TaskTable.jsx,1289\nraja-app-main/src/components/dashboard/TaskTemplate.jsx,1589\nraja-app-main/src/components/dashboard/TicketTemplate.jsx,453\nraja-app-main/src/contexts/TaskContext.jsx,211\nraja-app-main/src/enums/StatusType.jsx,48\nraja-app-main/src/pages/_app.jsx,112\nraja-app-main/src/pages/_document.jsx,236\nraja-app-main/src/pages/dashboard.jsx,726\nraja-app-main/src/pages/index.jsx,318\nraja-app-main/src/pages/login.jsx,51\nraja-app-main/src/pages/register.jsx,53\nraja-app-main/src/styles/tailwind.css,37\nraja-app-main/tailwind.config.js,452\nraja-app-main/tickets.jsonl,683\n Code for the following raja-app-main/tickets.jsonl: \n {\"name\": \"Unhandled runtime error\", \"type\": \"Bug\", \"description\": \"An unhandled runtime error was encountered in Speakers.jsx. The issue is caused by a ReferenceError as mediaVariable is not defined, which results in a failure during the execution.\", \"acceptance_criteria\": \"The reference error should be fixed, and the addEventListener method call on the mediaVariable variable should be successful. There should be no runtime errors related to undefined variables in Speakers.jsx, and all functionality dependent on the mediaVariable variable should work as expected.\", \"how_to_reproduce\": \"The error is located at line 172 in the Speakers.jsx file. The steps to reproduce this error are not yet fully identified, so further investigation is required to determine the sequence of actions leading to this error.\", \"status\":  \"ready_to_deploy\"}\n{\"name\": \"Embeddings compute prefix error\", \"type\": \"Bug\", \"description\": \"There's a type error in the embeddings.compute_prefix_and_zip_url function. It fails when a non-string argument is passed.\", \"acceptance_criteria\": \"The compute_prefix_and_zip_url function should handle non-string inputs gracefully without throwing a type error. It should provide a meaningful error message indicating the incorrect input type.\", \"how_to_reproduce\": \"This error can be reproduced by calling the compute_prefix_and_zip_url function with a non-string argument. Further investigation is required to determine if there are other inputs that could lead to this error.\", \"status\":  \"ready_to_deploy\"}\n{\"name\": \"New endpoint that provides status of embedding workflow\", \"type\": \"Feature\", \"description\": \"We need an endpoint that provides status of the embedding workflow. This endpoint should return the current stage of the workflow and estimated time for completion.\", \"acceptance_criteria\": \"A new endpoint /v1/status should be created that returns a JSON response with the current stage of the workflow and an estimated time to completion. The endpoint should handle errors gracefully and provide meaningful messages in case of failures.\", \"how_to_reproduce\": \"\", \"status\":  \"ready_to_deploy\"}\n{\"name\": \"Intermittent failure of run-raja endpoint\", \"type\": \"Bug\", \"description\": \"The /v1/run-raja endpoint is failing intermittently with a 500 internal server error. The error message indicates a failure in the raja.raja_agent function.\", \"acceptance_criteria\": \"The /v1/run-raja endpoint should handle failures in the raja_agent function gracefully and provide meaningful error messages to the client. It should not return a 500 internal server error.\", \"how_to_reproduce\": \"This error can be reproduced by making multiple concurrent requests to the /v1/run-raja endpoint. Further investigation is required to determine the exact conditions leading to the error.\", \"status\":  \"ready_to_deploy\"}\n{\"name\": \"Logging to debug flask app\", \"type\": \"Feature\", \"description\": \"We need to add logging to our Flask app to better track and debug errors. The logs should capture key actions like starting and completing the embedding workflow, starting and completing the Raja workflow, and any errors.\", \"acceptance_criteria\": \"Logging should be added to the Flask app. The logs should be written to a file that can be reviewed later. It should log key events in the application, including starting and completing workflows and any errors. The logs should include timestamps, the event description, and any relevant details.\", \"how_to_reproduce\": \"\", \"status\":  \"ready_to_deploy\"}\n Code for the following raja-app-main/src/components/Testimonials.jsx: \n import Image from 'next/image'\n\nimport { Container } from '@/components/Container'\nimport avatarImage1 from '@/images/avatars/avatar-1.png'\nimport avatarImage2 from '@/images/avatars/avatar-2.png'\nimport avatarImage3 from '@/images/avatars/avatar-3.png'\nimport avatarImage4 from '@/images/avatars/avatar-4.png'\nimport avatarImage5 from '@/images/avatars/avatar-5.png'\n\nconst testimonials = [\n  [\n    {\n      content:\n        'TaxPal is so easy to use I can\u2019t help but wonder if it\u2019s really doing the things the government expects me to do.',\n      author: {\n        name: 'Sheryl Berge',\n        role: 'CEO at Lynch LLC',\n        image: avatarImage1,\n      },\n    },\n    {\n      content:\n        'I\u2019m trying to get a hold of someone in support, I\u2019m in a lot of trouble right now and they are saying it has something to do with my books. Please get back to me right away.',\n      author: {\n        name: 'Amy Hahn',\n        role: 'Director at Velocity Industries',\n        image: avatarImage4,\n      },\n    },\n  ],\n  [\n    {\n      content:\n        'The best part about TaxPal is every time I pay my employees, my bank balance doesn\u2019t go down like it used to. Looking forward to spending this extra cash when I figure out why my card is being declined.',\n      author: {\n        name: 'Leland Kiehn',\n        role: 'Founder of Kiehn and Sons',\n        image: avatarImage5,\n      },\n    },\n    {\n      content:\n        'There are so many things I had to do with my old software that I just don\u2019t do at all with TaxPal. Suspicious but I can\u2019t say I don\u2019t love it.',\n      author: {\n        name: 'Erin Powlowski',\n        role: 'COO at Armstrong Inc',\n        image: avatarImage2,\n      },\n    },\n  ],\n  [\n    {\n      content:\n        'I used to have to remit tax to the EU and with TaxPal I somehow don\u2019t have to do that anymore. Nervous to travel there now though.',\n      author: {\n        name: 'Peter Renolds',\n        role: 'Founder of West Inc',\n        image: avatarImage3,\n      },\n    },\n    {\n      content:\n        'This is the fourth email I\u2019ve sent to your support team. I am literally being held in jail for tax fraud. Please answer your damn emails, this is important.',\n      author: {\n        name: 'Amy Hahn',\n        role: 'Director at Velocity Industries',\n        image: avatarImage4,\n      },\n    },\n  ],\n]\n\nfunction QuoteIcon(props) {\n  return (\n    <svg aria-hidden=\"true\" width={105} height={78} {...props}>\n      <path d=\"M25.086 77.292c-4.821 0-9.115-1.205-12.882-3.616-3.767-2.561-6.78-6.102-9.04-10.622C1.054 58.534 0 53.411 0 47.686c0-5.273.904-10.396 2.712-15.368 1.959-4.972 4.746-9.567 8.362-13.786a59.042 59.042 0 0 1 12.43-11.3C28.325 3.917 33.599 1.507 39.324 0l11.074 13.786c-6.479 2.561-11.677 5.951-15.594 10.17-3.767 4.219-5.65 7.835-5.65 10.848 0 1.356.377 2.863 1.13 4.52.904 1.507 2.637 3.089 5.198 4.746 3.767 2.41 6.328 4.972 7.684 7.684 1.507 2.561 2.26 5.5 2.26 8.814 0 5.123-1.959 9.19-5.876 12.204-3.767 3.013-8.588 4.52-14.464 4.52Zm54.24 0c-4.821 0-9.115-1.205-12.882-3.616-3.767-2.561-6.78-6.102-9.04-10.622-2.11-4.52-3.164-9.643-3.164-15.368 0-5.273.904-10.396 2.712-15.368 1.959-4.972 4.746-9.567 8.362-13.786a59.042 59.042 0 0 1 12.43-11.3C82.565 3.917 87.839 1.507 93.564 0l11.074 13.786c-6.479 2.561-11.677 5.951-15.594 10.17-3.767 4.219-5.65 7.835-5.65 10.848 0 1.356.377 2.863 1.13 4.52.904 1.507 2.637 3.089 5.198 4.746 3.767 2.41 6.328 4.972 7.684 7.684 1.507 2.561 2.26 5.5 2.26 8.814 0 5.123-1.959 9.19-5.876 12.204-3.767 3.013-8.588 4.52-14.464 4.52Z\" />\n    </svg>\n  )\n}\n\nexport function Testimonials() {\n  return (\n    <section\n      id=\"testimonials\"\n      aria-label=\"What our customers are saying\"\n      className=\"bg-slate-50 py-20 sm:py-32\"\n    >\n      <Container>\n        <div className=\"mx-auto max-w-2xl md:text-center\">\n          <h2 className=\"font-display text-3xl tracking-tight text-slate-900 sm:text-4xl\">\n            Loved by businesses worldwide.\n          </h2>\n          <p className=\"mt-4 text-lg tracking-tight text-slate-700\">\n            Our software is so simple that people can\u2019t help but fall in love\n            with it. Simplicity is easy when you just skip tons of\n            mission-critical features.\n          </p>\n        </div>\n        <ul\n          role=\"list\"\n          className=\"mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-6 sm:gap-8 lg:mt-20 lg:max-w-none lg:grid-cols-3\"\n        >\n          {testimonials.map((column, columnIndex) => (\n            <li key={columnIndex}>\n              <ul role=\"list\" className=\"flex flex-col gap-y-6 sm:gap-y-8\">\n                {column.map((testimonial, testimonialIndex) => (\n                  <li key={testimonialIndex}>\n                    <figure className=\"relative rounded-2xl bg-white p-6 shadow-xl shadow-slate-900/10\">\n                      <QuoteIcon className=\"absolute left-6 top-6 fill-slate-100\" />\n                      <blockquote className=\"relative\">\n                        <p className=\"text-lg tracking-tight text-slate-900\">\n                          {testimonial.content}\n                        </p>\n                      </blockquote>\n                      <figcaption className=\"relative mt-6 flex items-center justify-between border-t border-slate-100 pt-6\">\n                        <div>\n                          <div className=\"font-display text-base text-slate-900\">\n                            {testimonial.author.name}\n                          </div>\n                          <div className=\"mt-1 text-sm text-slate-500\">\n                            {testimonial.author.role}\n                          </div>\n                        </div>\n                        <div className=\"overflow-hidden rounded-full bg-slate-50\">\n                          <Image\n                            className=\"h-14 w-14 object-cover\"\n                            src={testimonial.author.image}\n                            alt=\"\"\n                            width={56}\n                            height={56}\n                          />\n                        </div>\n                      </figcaption>\n                    </figure>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          ))}\n        </ul>\n      </Container>\n    </section>\n  )\n}\n Code for the following raja-app-main/src/components/Testimonials.jsx: \n import Image from 'next/image'\n\nimport { Container } from '@/components/Container'\nimport avatarImage1 from '@/images/avatars/avatar-1.png'\nimport avatarImage2 from '@/images/avatars/avatar-2.png'\nimport avatarImage3 from '@/images/avatars/avatar-3.png'\nimport avatarImage4 from '@/images/avatars/avatar-4.png'\nimport avatarImage5 from '@/images/avatars/avatar-5.png'\n\nconst testimonials = [\n  [\n    {\n      content:\n        'TaxPal is so easy to use I can\u2019t help but wonder if it\u2019s really doing the things the government expects me to do.',\n      author: {\n        name: 'Sheryl Berge',\n        role: 'CEO at Lynch LLC',\n        image: avatarImage1,\n      },\n    },\n    {\n      content:\n        'I\u2019m trying to get a hold of someone in support, I\u2019m in a lot of trouble right now and they are saying it has something to do with my books. Please get back to me right away.',\n      author: {\n        name: 'Amy Hahn',\n        role: 'Director at Velocity Industries',\n        image: avatarImage4,\n      },\n    },\n  ],\n  [\n    {\n      content:\n        'The best part about TaxPal is every time I pay my employees, my bank balance doesn\u2019t go down like it used to. Looking forward to spending this extra cash when I figure out why my card is being declined.',\n      author: {\n        name: 'Leland Kiehn',\n        role: 'Founder of Kiehn and Sons',\n        image: avatarImage5,\n      },\n    },\n    {\n      content:\n        'There are so many things I had to do with my old software that I just don\u2019t do at all with TaxPal. Suspicious but I can\u2019t say I don\u2019t love it.',\n      author: {\n        name: 'Erin Powlowski',\n        role: 'COO at Armstrong Inc',\n        image: avatarImage2,\n      },\n    },\n  ],\n  [\n    {\n      content:\n        'I used to have to remit tax to the EU and with TaxPal I somehow don\u2019t have to do that anymore. Nervous to travel there now though.',\n      author: {\n        name: 'Peter Renolds',\n        role: 'Founder of West Inc',\n        image: avatarImage3,\n      },\n    },\n    {\n      content:\n        'This is the fourth email I\u2019ve sent to your support team. I am literally being held in jail for tax fraud. Please answer your damn emails, this is important.',\n      author: {\n        name: 'Amy Hahn',\n        role: 'Director at Velocity Industries',\n        image: avatarImage4,\n      },\n    },\n  ],\n]\n\nfunction QuoteIcon(props) {\n  return (\n    <svg aria-hidden=\"true\" width={105} height={78} {...props}>\n      <path d=\"M25.086 77.292c-4.821 0-9.115-1.205-12.882-3.616-3.767-2.561-6.78-6.102-9.04-10.622C1.054 58.534 0 53.411 0 47.686c0-5.273.904-10.396 2.712-15.368 1.959-4.972 4.746-9.567 8.362-13.786a59.042 59.042 0 0 1 12.43-11.3C28.325 3.917 33.599 1.507 39.324 0l11.074 13.786c-6.479 2.561-11.677 5.951-15.594 10.17-3.767 4.219-5.65 7.835-5.65 10.848 0 1.356.377 2.863 1.13 4.52.904 1.507 2.637 3.089 5.198 4.746 3.767 2.41 6.328 4.972 7.684 7.684 1.507 2.561 2.26 5.5 2.26 8.814 0 5.123-1.959 9.19-5.876 12.204-3.767 3.013-8.588 4.52-14.464 4.52Zm54.24 0c-4.821 0-9.115-1.205-12.882-3.616-3.767-2.561-6.78-6.102-9.04-10.622-2.11-4.52-3.164-9.643-3.164-15.368 0-5.273.904-10.396 2.712-15.368 1.959-4.972 4.746-9.567 8.362-13.786a59.042 59.042 0 0 1 12.43-11.3C82.565 3.917 87.839 1.507 93.564 0l11.074 13.786c-6.479 2.561-11.677 5.951-15.594 10.17-3.767 4.219-5.65 7.835-5.65 10.848 0 1.356.377 2.863 1.13 4.52.904 1.507 2.637 3.089 5.198 4.746 3.767 2.41 6.328 4.972 7.684 7.684 1.507 2.561 2.26 5.5 2.26 8.814 0 5.123-1.959 9.19-5.876 12.204-3.767 3.013-8.588 4.52-14.464 4.52Z\" />\n    </svg>\n  )\n}\n\nexport function Testimonials() {\n  return (\n    <section\n      id=\"testimonials\"\n      aria-label=\"What our customers are saying\"\n      className=\"bg-slate-50 py-20 sm:py-32\"\n    >\n      <Container>\n        <div className=\"mx-auto max-w-2xl md:text-center\">\n          <h2 className=\"font-display text-3xl tracking-tight text-slate-900 sm:text-4xl\">\n            Loved by businesses worldwide.\n          </h2>\n          <p className=\"mt-4 text-lg tracking-tight text-slate-700\">\n            Our software is so simple that people can\u2019t help but fall in love\n            with it. Simplicity is easy when you just skip tons of\n            mission-critical features.\n          </p>\n        </div>\n        <ul\n          role=\"list\"\n          className=\"mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-6 sm:gap-8 lg:mt-20 lg:max-w-none lg:grid-cols-3\"\n        >\n          {testimonials.map((column, columnIndex) => (\n            <li key={columnIndex}>\n              <ul role=\"list\" className=\"flex flex-col gap-y-6 sm:gap-y-8\">\n                {column.map((testimonial, testimonialIndex) => (\n                  <li key={testimonialIndex}>\n                    <figure className=\"relative rounded-2xl bg-white p-6 shadow-xl shadow-slate-900/10\">\n                      <QuoteIcon className=\"absolute left-6 top-6 fill-slate-100\" />\n                      <blockquote className=\"relative\">\n                        <p className=\"text-lg tracking-tight text-slate-900\">\n                          {testimonial.content}\n                        </p>\n                      </blockquote>\n                      <figcaption className=\"relative mt-6 flex items-center justify-between border-t border-slate-100 pt-6\">\n                        <div>\n                          <div className=\"font-display text-base text-slate-900\">\n                            {testimonial.author.name}\n                          </div>\n                          <div className=\"mt-1 text-sm text-slate-500\">\n                            {testimonial.author.role}\n                          </div>\n                        </div>\n                        <div className=\"overflow-hidden rounded-full bg-slate-50\">\n                          <Image\n                            className=\"h-14 w-14 object-cover\"\n                            src={testimonial.author.image}\n                            alt=\"\"\n                            width={56}\n                            height={56}\n                          />\n                        </div>\n                      </figcaption>\n                    </figure>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          ))}\n        </ul>\n      </Container>\n    </section>\n  )\n}\n "
=======
"Code for the following raja-app-main/tickets.jsonl: \n {\"name\": \"Unhandled runtime error\", \"type\": \"Bug\", \"description\": \"An unhandled runtime error was encountered in Speakers.jsx. The issue is caused by a ReferenceError as mediaVariable is not defined, which results in a failure during the execution.\", \"acceptance_criteria\": \"The reference error should be fixed, and the addEventListener method call on the mediaVariable variable should be successful. There should be no runtime errors related to undefined variables in Speakers.jsx, and all functionality dependent on the mediaVariable variable should work as expected.\", \"how_to_reproduce\": \"The error is located at line 172 in the Speakers.jsx file. The steps to reproduce this error are not yet fully identified, so further investigation is required to determine the sequence of actions leading to this error.\", \"status\":  \"ready_to_deploy\"}\n{\"name\": \"Embeddings compute prefix error\", \"type\": \"Bug\", \"description\": \"There's a type error in the embeddings.compute_prefix_and_zip_url function. It fails when a non-string argument is passed.\", \"acceptance_criteria\": \"The compute_prefix_and_zip_url function should handle non-string inputs gracefully without throwing a type error. It should provide a meaningful error message indicating the incorrect input type.\", \"how_to_reproduce\": \"This error can be reproduced by calling the compute_prefix_and_zip_url function with a non-string argument. Further investigation is required to determine if there are other inputs that could lead to this error.\", \"status\":  \"ready_to_deploy\"}\n{\"name\": \"New endpoint that provides status of embedding workflow\", \"type\": \"Feature\", \"description\": \"We need an endpoint that provides status of the embedding workflow. This endpoint should return the current stage of the workflow and estimated time for completion.\", \"acceptance_criteria\": \"A new endpoint /v1/status should be created that returns a JSON response with the current stage of the workflow and an estimated time to completion. The endpoint should handle errors gracefully and provide meaningful messages in case of failures.\", \"how_to_reproduce\": \"\", \"status\":  \"ready_to_deploy\"}\n{\"name\": \"Intermittent failure of run-raja endpoint\", \"type\": \"Bug\", \"description\": \"The /v1/run-raja endpoint is failing intermittently with a 500 internal server error. The error message indicates a failure in the raja.raja_agent function.\", \"acceptance_criteria\": \"The /v1/run-raja endpoint should handle failures in the raja_agent function gracefully and provide meaningful error messages to the client. It should not return a 500 internal server error.\", \"how_to_reproduce\": \"This error can be reproduced by making multiple concurrent requests to the /v1/run-raja endpoint. Further investigation is required to determine the exact conditions leading to the error.\", \"status\":  \"ready_to_deploy\"}\n{\"name\": \"Logging to debug flask app\", \"type\": \"Feature\", \"description\": \"We need to add logging to our Flask app to better track and debug errors. The logs should capture key actions like starting and completing the embedding workflow, starting and completing the Raja workflow, and any errors.\", \"acceptance_criteria\": \"Logging should be added to the Flask app. The logs should be written to a file that can be reviewed later. It should log key events in the application, including starting and completing workflows and any errors. The logs should include timestamps, the event description, and any relevant details.\", \"how_to_reproduce\": \"\", \"status\":  \"ready_to_deploy\"}\n Code for the following raja-app-main/src/api/dashboard.jsx: \n export const initializeRepo = async (userEmailId, userEmail, repoLink) => {\n    try {\n        const response = await fetch('http://localhost:5000/v1/initialize-repo', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ user_id: userEmailId, user_email: userEmail, repo_url: repoLink })\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        // If response contains any data that you want to return, parse and return it here\n        // return await response.json();\n    } catch (error) {\n        console.error(\"Failed to initialize repo:\", error);\n    }\n}\n\nexport const rajaAgent = async (details) => {\n    try {\n        const response = await fetch('http://localhost:5000/v1/run-raja', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ details: details })\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n    } catch (error) {\n        console.error(\"Failed to run raja agent:\", error);\n    }\n}\n\nexport const getTickets = async () => {\n    try {\n        const response = await fetch('http://localhost:5000/v1/get-tickets', {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        return data;\n\n    } catch (error) {\n        console.error(\"Failed to fetch tickets:\", error);\n    }\n}\n\nexport const createTicket = async (ticketData) => {\n    try {\n        const response = await fetch('http://localhost:5000/v1/create-ticket', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(ticketData),\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n    } catch (error) {\n        console.error(\"Failed to create ticket:\", error);\n    }\n} Code for the following raja-app-main/server/app.py: \n import os\nfrom pprint import pprint\n\nimport embeddings\nimport raja\nfrom dotenv import load_dotenv\nfrom flask import Flask, jsonify, request\nfrom flask_cors import CORS, cross_origin\nfrom ghapi.all import GhApi\n\nfrom convex import ConvexClient\n\napp = Flask(\"Raja\")\ncors = CORS(app)\n\n# get the directory of the current script\ncurrent_dir = os.path.dirname(os.path.abspath(__file__))\n\n# go up one level to get the root directory\nroot_dir = os.path.dirname(current_dir)\n\ndotenv_path = os.path.join(root_dir, \".env.local\")\n\n# load the .env file\nload_dotenv(dotenv_path)\n\nclient = ConvexClient(os.getenv(\"NEXT_PUBLIC_CONVEX_URL\"))\nGH_TOKEN = os.getenv(\"GH_TOKEN\", \"\")\n\n\n@app.route(\"/v1/initialize-repo\", methods=[\"POST\"])\n@cross_origin()\ndef initialize_repo():\n    req_data = request.get_json()\n    user_id = req_data[\"user_id\"]\n    user_email = req_data[\"user_email\"]\n    repo_url = req_data[\"repo_url\"]\n\n    try:\n        folder_path, zip_url = embeddings.compute_prefix_and_zip_url(repo_url)\n        embeddings.execute_embedding_workflow(zip_url, folder_path)\n        repo_owner, repo_name = embeddings.get_repo_info(repo_url)\n        client.mutation(\n            \"repo:addRepo\",\n            {\n                \"user_id\": user_id,\n                \"user_email\": user_email,\n                \"url\": repo_url,\n                \"owner\": repo_owner,\n                \"name\": repo_name,\n            },\n        )\n    except ValueError as e:\n        return jsonify(error=str(e)), 400\n    return jsonify(message=\"Embedding workflow executed successfully\"), 200\n\n\n@app.route(\"/v1/run-raja\", methods=[\"POST\"])\ndef run_raja():\n    print(\"Running Raja\")\n    req_data = request.get_json()\n    print(req_data)\n    try:\n        raja.raja_agent(req_data)\n    except Exception as e:\n        return jsonify(error=str(e)), 400\n    return jsonify(message=\"Raja workflow executed successfully\"), 200\n\n\n@app.route(\"/v1/delete-all-except-main\", methods=[\"POST\"])\ndef delete_all_except_main():\n    req_data = request.get_json()\n    repo_owner = req_data[\"repo_owner\"]\n    repo_name = req_data[\"repo_name\"]\n    ghapi = GhApi(owner=repo_owner, repo=repo_name, token=GH_TOKEN)\n\n    # Get all branches\n    branches = ghapi.repos.list_branches()\n\n    for branch in branches:\n        # Delete the branch if its name is not 'main'\n        if branch.name != \"main\":\n            try:\n                ghapi.git.delete_ref(ref=f\"heads/{branch.name}\")\n                print(f\"Deleted branch: {branch.name}\")\n            except Exception as e:\n                print(f\"Error deleting branch {branch.name}: {e}\")\n\n    return {}\n\n\n@app.route(\"/v1/get-tickets\", methods=[\"GET\"])\ndef get_tickets():\n    tickets = client.query(\"tickets:get\")\n    print(tickets)\n    return tickets\n\n\n@app.route(\"/v1/create-ticket\", methods=[\"POST\"])\ndef create_ticket():\n    req_data = request.get_json()\n    print(req_data)\n    client.mutation(\"tickets:createTicket\", req_data)\n    return {}\n\n\nif __name__ == \"__main__\":\n    app.run(port=5000, debug=True) Code for the following raja-app-main/src/api/dashboard.jsx: \n export const initializeRepo = async (userEmailId, userEmail, repoLink) => {\n    try {\n        const response = await fetch('http://localhost:5000/v1/initialize-repo', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ user_id: userEmailId, user_email: userEmail, repo_url: repoLink })\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        // If response contains any data that you want to return, parse and return it here\n        // return await response.json();\n    } catch (error) {\n        console.error(\"Failed to initialize repo:\", error);\n    }\n}\n\nexport const rajaAgent = async (details) => {\n    try {\n        const response = await fetch('http://localhost:5000/v1/run-raja', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ details: details })\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n    } catch (error) {\n        console.error(\"Failed to run raja agent:\", error);\n    }\n}\n\nexport const getTickets = async () => {\n    try {\n        const response = await fetch('http://localhost:5000/v1/get-tickets', {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        return data;\n\n    } catch (error) {\n        console.error(\"Failed to fetch tickets:\", error);\n    }\n}\n\nexport const createTicket = async (ticketData) => {\n    try {\n        const response = await fetch('http://localhost:5000/v1/create-ticket', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(ticketData),\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n    } catch (error) {\n        console.error(\"Failed to create ticket:\", error);\n    }\n} "
>>>>>>> c2d871298a897e4fe95a953745ff3ac4b0abe112
